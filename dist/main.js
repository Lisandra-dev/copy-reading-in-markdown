/** GENERATED BY OBSIDIAN-PLUGIN-CLI, DO NOT EDIT */
var T=Object.create;var d=Object.defineProperty;var f=Object.getOwnPropertyDescriptor;var L=Object.getOwnPropertyNames;var M=Object.getPrototypeOf,S=Object.prototype.hasOwnProperty;var u=i=>d(i,"__esModule",{value:!0});var h=(i,e)=>{u(i);for(var n in e)d(i,n,{get:e[n],enumerable:!0})},H=(i,e,n)=>{if(e&&typeof e=="object"||typeof e=="function")for(let t of L(e))!S.call(i,t)&&t!=="default"&&d(i,t,{get:()=>e[t],enumerable:!(n=f(e,t))||n.enumerable});return i},k=i=>H(u(d(i!=null?T(M(i)):{},"default",i&&i.__esModule&&"default"in i?{get:()=>i.default,enumerable:!0}:{value:i,enumerable:!0})),i);h(exports,{default:()=>m});var c=k(require("obsidian")),y={},m=class extends c.Plugin{createNumeroteList(e,n){let t=e.querySelectorAll("li"),a=!0;for(let s of t)if(!s.hasAttribute("data-line")){a=!1;break}if(a){let s=document.createElement(n);for(let l of t)s.appendChild(l);e.innerHTML="",e.appendChild(s)}return e}fixBlockquote(e){var s,l,g;let t=activeWindow.getSelection().getRangeAt(0).commonAncestorContainer,a=t.parentElement;if(t&&((s=t.classList)==null?void 0:s.contains("callout"))){let o=document.createElement("blockquote");return o.appendChild(e),o.outerHTML}if(!((l=a.classList)==null?void 0:l.contains("markdown-preview-view"))){let o=a;for(;o&&o.nodeName!=="DIV";)o=o.parentElement;console.log(o);let w=activeWindow.getSelection().toString();o=o.cloneNode(!0);let r=o.innerText.replace(w,"");if(r.trim()!==""&&(r=r.trim(),o.innerHTML=o.innerHTML.replace(r.trim(),"")),(g=o.classList)==null?void 0:g.contains("callout-content")){let p=document.createElement("blockquote");return p.appendChild(o.cloneNode(!0)),p.outerHTML}return o.outerHTML}return e.innerHTML}getSelectionHasHTML(){let e=activeWindow.getSelection().getRangeAt(0),n=e.cloneContents(),t=document.createElement("div");t.appendChild(n);let a=e.commonAncestorContainer;if(a.nodeName==="OL"||a.nodeName==="UL"){let o=a.nodeName.toLowerCase();t=this.createNumeroteList(t,o)}return(0,c.htmlToMarkdown)(t.innerHTML).split(`
`).filter(o=>o.trim()!==">").join(`
`)}getIframeSelectionHasHTML(){var l;let e=this.app.workspace.getActiveViewOfType(c.ItemView),n=e==null?void 0:e.contentEl,t=n==null?void 0:n.querySelector("iframe"),a=(t==null?void 0:t.contentWindow)||(t==null?void 0:t.contentDocument),s=(l=a==null?void 0:a.getSelection())==null?void 0:l.toString();return s||this.getSelectionHasHTML()}async onload(){console.log(`CopyReadingInMarkdown v.${this.manifest.version} loaded.`),await this.loadSettings(),this.addCommand({id:"copy-reading-in-markdown",name:"Copy Reading in Markdown",callback:()=>{var t;let e=this.app.workspace.getActiveViewOfType(c.MarkdownView),n="";e&&e.getMode()!=="source"?n=this.getSelectionHasHTML():e?n=activeWindow.getSelection().toString():((t=this.app.workspace.getActiveViewOfType(c.ItemView))==null?void 0:t.getViewType())==="canvas"&&(n=this.getIframeSelectionHasHTML()),n&&navigator.clipboard.writeText(n)}})}onunload(){console.log("unloading plugin")}async loadSettings(){this.settings=Object.assign({},y,await this.loadData())}async saveSettings(){await this.saveData(this.settings)}};0&&(module.exports={});
